{"ast":null,"code":"'use strict';\n\nmodule.exports = function drain(op, done) {\n  var read, abort;\n\n  // Declared here so that it captures the drain's stack trace\n  var doneLackingErr;\n  if (!done) {\n    doneLackingErr = new Error('no done callback supplied');\n  }\n  function sink(_read) {\n    read = _read;\n    if (abort) return sink.abort()\n    //this function is much simpler to write if you\n    //just use recursion, but by using a while loop\n    //we do not blow the stack if the stream happens to be sync.\n    ;\n    (function next() {\n      var loop = true,\n        cbed = false;\n      while (loop) {\n        cbed = false;\n        read(null, function (end, data) {\n          cbed = true;\n          if (end = end || abort) {\n            loop = false;\n            if (done) done(end === true ? null : end);else if (end && end !== true) {\n              console.warn(doneLackingErr);\n              throw end;\n            }\n          } else if (op && false === op(data) || abort) {\n            loop = false;\n            read(abort || true, done || function () {});\n          } else if (!loop) {\n            next();\n          }\n        });\n        if (!cbed) {\n          loop = false;\n          return;\n        }\n      }\n    })();\n  }\n  sink.abort = function (err, cb) {\n    if ('function' == typeof err) cb = err, err = true;\n    abort = err || true;\n    if (read) return read(abort, cb || function () {});\n  };\n  return sink;\n};","map":{"version":3,"names":["module","exports","drain","op","done","read","abort","doneLackingErr","Error","sink","_read","next","loop","cbed","end","data","console","warn","err","cb"],"sources":["C:/Users/rajde/Desktop/Land-Registry-Project/node_modules/pull-stream/sinks/drain.js"],"sourcesContent":["'use strict'\n\nmodule.exports = function drain (op, done) {\n  var read, abort\n\n  // Declared here so that it captures the drain's stack trace\n  var doneLackingErr\n  if (!done) {\n    doneLackingErr = new Error('no done callback supplied')\n  }\n\n  function sink (_read) {\n    read = _read\n    if(abort) return sink.abort()\n    //this function is much simpler to write if you\n    //just use recursion, but by using a while loop\n    //we do not blow the stack if the stream happens to be sync.\n    ;(function next() {\n        var loop = true, cbed = false\n        while(loop) {\n          cbed = false\n          read(null, function (end, data) {\n            cbed = true\n            if(end = end || abort) {\n              loop = false\n              if(done) done(end === true ? null : end)\n              else if(end && end !== true) {\n                console.warn(doneLackingErr)\n                throw end\n              }\n            }\n            else if(op && false === op(data) || abort) {\n              loop = false\n              read(abort || true, done || function () {})\n            }\n            else if(!loop){\n              next()\n            }\n          })\n          if(!cbed) {\n            loop = false\n            return\n          }\n        }\n      })()\n  }\n\n  sink.abort = function (err, cb) {\n    if('function' == typeof err)\n      cb = err, err = true\n    abort = err || true\n    if(read) return read(abort, cb || function () {})\n  }\n\n  return sink\n}\n"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,OAAO,GAAG,SAASC,KAAKA,CAAEC,EAAE,EAAEC,IAAI,EAAE;EACzC,IAAIC,IAAI,EAAEC,KAAK;;EAEf;EACA,IAAIC,cAAc;EAClB,IAAI,CAACH,IAAI,EAAE;IACTG,cAAc,GAAG,IAAIC,KAAK,CAAC,2BAA2B,CAAC;EACzD;EAEA,SAASC,IAAIA,CAAEC,KAAK,EAAE;IACpBL,IAAI,GAAGK,KAAK;IACZ,IAAGJ,KAAK,EAAE,OAAOG,IAAI,CAACH,KAAK;IAC3B;IACA;IACA;IAAA;IACC,CAAC,SAASK,IAAIA,CAAA,EAAG;MACd,IAAIC,IAAI,GAAG,IAAI;QAAEC,IAAI,GAAG,KAAK;MAC7B,OAAMD,IAAI,EAAE;QACVC,IAAI,GAAG,KAAK;QACZR,IAAI,CAAC,IAAI,EAAE,UAAUS,GAAG,EAAEC,IAAI,EAAE;UAC9BF,IAAI,GAAG,IAAI;UACX,IAAGC,GAAG,GAAGA,GAAG,IAAIR,KAAK,EAAE;YACrBM,IAAI,GAAG,KAAK;YACZ,IAAGR,IAAI,EAAEA,IAAI,CAACU,GAAG,KAAK,IAAI,GAAG,IAAI,GAAGA,GAAG,CAAC,MACnC,IAAGA,GAAG,IAAIA,GAAG,KAAK,IAAI,EAAE;cAC3BE,OAAO,CAACC,IAAI,CAACV,cAAc,CAAC;cAC5B,MAAMO,GAAG;YACX;UACF,CAAC,MACI,IAAGX,EAAE,IAAI,KAAK,KAAKA,EAAE,CAACY,IAAI,CAAC,IAAIT,KAAK,EAAE;YACzCM,IAAI,GAAG,KAAK;YACZP,IAAI,CAACC,KAAK,IAAI,IAAI,EAAEF,IAAI,IAAI,YAAY,CAAC,CAAC,CAAC;UAC7C,CAAC,MACI,IAAG,CAACQ,IAAI,EAAC;YACZD,IAAI,EAAE;UACR;QACF,CAAC,CAAC;QACF,IAAG,CAACE,IAAI,EAAE;UACRD,IAAI,GAAG,KAAK;UACZ;QACF;MACF;IACF,CAAC,GAAG;EACR;EAEAH,IAAI,CAACH,KAAK,GAAG,UAAUY,GAAG,EAAEC,EAAE,EAAE;IAC9B,IAAG,UAAU,IAAI,OAAOD,GAAG,EACzBC,EAAE,GAAGD,GAAG,EAAEA,GAAG,GAAG,IAAI;IACtBZ,KAAK,GAAGY,GAAG,IAAI,IAAI;IACnB,IAAGb,IAAI,EAAE,OAAOA,IAAI,CAACC,KAAK,EAAEa,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC;EACnD,CAAC;EAED,OAAOV,IAAI;AACb,CAAC"},"metadata":{},"sourceType":"script"}