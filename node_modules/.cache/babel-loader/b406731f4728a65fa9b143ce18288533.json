{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajde\\\\Desktop\\\\Land-Registry-Application\\\\src\\\\Components\\\\Dashboard_Govt.js\";\nimport React, { Component } from 'react';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport { Button, Container, CircularProgress } from '@material-ui/core';\nimport Land from '../abis/LandRegistry.json';\nimport ipfs from '../ipfs';\nimport Table from '../Containers/Govt_Table';\nimport { withStyles } from '@material-ui/core/styles';\nimport Web3 from 'web3';\nimport jwtDecode from 'jwt-decode';\nconst styles = theme => ({\n  container: {\n    // paddingLedt: '0px',\n    // paddingRight: '0px',\n    '& .MuiContainer-maxWidthLg': {\n      maxWidth: '100%'\n    }\n  }\n});\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.componentWillMount = async () => {\n      // console.log('token= ' + window.localStorage.getItem('token'))\n      const user = jwtDecode(window.localStorage.getItem('token'));\n      this.setState({\n        ...user.user\n      });\n      // this.setState({ ...user.user })\n      const web3 = window.web3;\n      // Use web3 to get the user's accounts.\n      const accounts = await web3.eth.getAccounts();\n      window.localStorage.setItem('web3account', accounts[0]);\n      this.setState({\n        isLoading: false\n      });\n      const networkId = await web3.eth.net.getId();\n      const LandData = Land.networks[networkId];\n      if (LandData) {\n        const landList = new web3.eth.Contract(Land.abi, LandData.address);\n        this.setState({\n          landList\n        });\n      } else {\n        window.alert('Token contract not deployed to detected network.');\n      }\n      this.getDetails();\n    };\n    this.state = {\n      assetList: [],\n      isLoading: true,\n      username: '',\n      Governmentpublickey: '',\n      address: '',\n      contact: '',\n      city: '',\n      imgurl: ''\n    };\n  }\n  async propertyDetails(property) {\n    // console.log(property)\n    let details = await this.state.landList.methods.landInfoOwner(property).call();\n    ipfs.cat(details[1], (err, res) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n      console.log(details);\n      const temp = JSON.parse(res.toString());\n      this.state.assetList.push({\n        property: property,\n        uniqueID: details[1],\n        name: temp.name,\n        key: details[0],\n        email: temp.email,\n        contact: temp.contact,\n        pan: temp.pan,\n        occupation: temp.occupation,\n        oaddress: temp.address,\n        ostate: temp.state,\n        ocity: temp.city,\n        opostalCode: temp.postalCode,\n        laddress: temp.laddress,\n        lstate: temp.lstate,\n        lcity: temp.lcity,\n        lpostalCode: temp.lpostalCode,\n        larea: temp.larea,\n        lamount: details[2],\n        isGovtApproved: details[3],\n        isAvailable: details[4],\n        requester: details[5],\n        requestStatus: details[6],\n        document: temp.document,\n        images: temp.images\n      });\n      this.setState({\n        assetList: [...this.state.assetList]\n      });\n    });\n  }\n  async getDetails() {\n    const properties = await this.state.landList.methods.Assets().call();\n    // console.log(properties)\n\n    for (let item of properties) {\n      console.log('item:' + item);\n      this.propertyDetails(item);\n    }\n  }\n  render() {\n    const {\n      classes\n    } = this.props;\n    return this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-bg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      style: {\n        marginTop: '40px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: '100px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      assetList: this.state.assetList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    })))));\n  }\n}\nexport default withStyles(styles)(Dashboard);","map":{"version":3,"names":["React","Component","withRouter","Redirect","Button","Container","CircularProgress","Land","ipfs","Table","withStyles","Web3","jwtDecode","styles","theme","container","maxWidth","Dashboard","constructor","props","componentWillMount","user","window","localStorage","getItem","setState","web3","accounts","eth","getAccounts","setItem","isLoading","networkId","net","getId","LandData","networks","landList","Contract","abi","address","alert","getDetails","state","assetList","username","Governmentpublickey","contact","city","imgurl","propertyDetails","property","details","methods","landInfoOwner","call","cat","err","res","console","error","log","temp","JSON","parse","toString","push","uniqueID","name","key","email","pan","occupation","oaddress","ostate","ocity","opostalCode","postalCode","laddress","lstate","lcity","lpostalCode","larea","lamount","isGovtApproved","isAvailable","requester","requestStatus","document","images","properties","Assets","item","render","classes","createElement","style","position","top","left","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","marginTop"],"sources":["C:/Users/rajde/Desktop/Land-Registry-Application/src/Components/Dashboard_Govt.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { withRouter, Redirect } from 'react-router-dom'\r\nimport { Button, Container, CircularProgress } from '@material-ui/core'\r\nimport Land from '../abis/LandRegistry.json'\r\nimport ipfs from '../ipfs'\r\nimport Table from '../Containers/Govt_Table'\r\nimport { withStyles } from '@material-ui/core/styles'\r\nimport Web3 from 'web3'\r\nimport jwtDecode from 'jwt-decode'\r\n\r\nconst styles = (theme) => ({\r\n  container: {\r\n    // paddingLedt: '0px',\r\n    // paddingRight: '0px',\r\n    '& .MuiContainer-maxWidthLg': {\r\n      maxWidth: '100%',\r\n    },\r\n  },\r\n})\r\n\r\nclass Dashboard extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      assetList: [],\r\n      isLoading: true,\r\n      username: '',\r\n      Governmentpublickey: '',\r\n      address: '',\r\n      contact: '',\r\n      city: '',\r\n      imgurl: '',\r\n    }\r\n  }\r\n\r\n  componentWillMount = async () => {\r\n    // console.log('token= ' + window.localStorage.getItem('token'))\r\n    const user = jwtDecode(window.localStorage.getItem('token'))\r\n    this.setState({ ...user.user })\r\n    // this.setState({ ...user.user })\r\n    const web3 = window.web3\r\n    // Use web3 to get the user's accounts.\r\n    const accounts = await web3.eth.getAccounts()\r\n    window.localStorage.setItem('web3account', accounts[0])\r\n    this.setState({ isLoading: false })\r\n    const networkId = await web3.eth.net.getId()\r\n    const LandData = Land.networks[networkId]\r\n    if (LandData) {\r\n      const landList = new web3.eth.Contract(Land.abi, LandData.address)\r\n      this.setState({ landList })\r\n    } else {\r\n      window.alert('Token contract not deployed to detected network.')\r\n    }\r\n    this.getDetails()\r\n  }\r\n\r\n  async propertyDetails(property) {\r\n    // console.log(property)\r\n    let details = await this.state.landList.methods\r\n      .landInfoOwner(property)\r\n      .call()\r\n    ipfs.cat(details[1], (err, res) => {\r\n      if (err) {\r\n        console.error(err)\r\n        return\r\n      }\r\n      console.log(details)\r\n      const temp = JSON.parse(res.toString())\r\n      this.state.assetList.push({\r\n        property: property,\r\n        uniqueID: details[1],\r\n        name: temp.name,\r\n        key: details[0],\r\n        email: temp.email,\r\n        contact: temp.contact,\r\n        pan: temp.pan,\r\n        occupation: temp.occupation,\r\n        oaddress: temp.address,\r\n        ostate: temp.state,\r\n        ocity: temp.city,\r\n        opostalCode: temp.postalCode,\r\n        laddress: temp.laddress,\r\n        lstate: temp.lstate,\r\n        lcity: temp.lcity,\r\n        lpostalCode: temp.lpostalCode,\r\n        larea: temp.larea,\r\n        lamount: details[2],\r\n        isGovtApproved: details[3],\r\n        isAvailable: details[4],\r\n        requester: details[5],\r\n        requestStatus: details[6],\r\n        document: temp.document,\r\n        images: temp.images,\r\n      })\r\n      this.setState({ assetList: [...this.state.assetList] })\r\n    })\r\n  }\r\n\r\n  async getDetails() {\r\n    const properties = await this.state.landList.methods.Assets().call()\r\n    // console.log(properties)\r\n\r\n    for (let item of properties) {\r\n      console.log('item:' + item)\r\n      this.propertyDetails(item)\r\n    }\r\n  }\r\n  render() {\r\n    const { classes } = this.props\r\n    return this.state.isLoading ? (\r\n      <div style={{ position: 'absolute', top: '50%', left: '50%' }}>\r\n        <CircularProgress />\r\n      </div>\r\n    ) : (\r\n      <div className=\"profile-bg\">\r\n        <div className={classes.container}>\r\n          <Container style={{ marginTop: '40px' }}>\r\n            {/* <Button\r\n            style={{ marginTop: '30px' }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => this.props.history.push('/registration_form')}\r\n          >\r\n            Register Land\r\n          </Button> */}\r\n            <div style={{ marginTop: '100px' }}>\r\n              <Table assetList={this.state.assetList} />\r\n            </div>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default withStyles(styles)(Dashboard)\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}